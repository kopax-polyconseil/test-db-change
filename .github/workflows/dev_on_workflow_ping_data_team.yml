name: "Ping data team on slack"
# This action pings slack for every new PR that adds, changes or removes a db migration.
# The ping is done on every push.

on:
  workflow_call:

jobs:
  slack-notification:
    name: 'Send slack notification'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4.1.1
      - uses: kceb/pull-request-url-action@v1
        id: pr-url
      - run: echo "${{ steps.pr-url.outputs.url }}"
      - run: |
          curl -s \
                -H "Accept: application/vnd.github.groot-preview+json" \
                -H "Authorization: token ${token}" \
                https://api.github.com/repos/${GITHUB_REPOSITORY}/commits/${GITHUB_SHA}/pulls | jq -r '.[].title'